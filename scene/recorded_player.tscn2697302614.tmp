[gd_scene load_steps=25 format=3 uid="uid://byxipsvhnnyec"]

[ext_resource type="Script" uid="uid://dcpacboqmumvr" path="res://script/RecordedPlayer.gd" id="1_vx2og"]
[ext_resource type="Texture2D" uid="uid://beaowaw3ucksp" path="res://icon.svg" id="2_b05ef"]
[ext_resource type="PackedScene" uid="uid://djsf3itc002gl" path="res://scene/state_machine.tscn" id="3_p4hug"]
[ext_resource type="Script" uid="uid://dhepx2737bxmw" path="res://script/state/IdleState.gd" id="4_cercp"]
[ext_resource type="Script" uid="uid://ki1u23wwktia" path="res://script/state/MoveState.gd" id="5_6hp1k"]
[ext_resource type="Script" uid="uid://c3tue7f8ul8dv" path="res://script/state/SprintState.gd" id="6_isn2n"]
[ext_resource type="Script" uid="uid://dgcyi6lkgvs6g" path="res://script/state/AttackState.gd" id="7_llrc2"]
[ext_resource type="Script" uid="uid://c3vaqpne6gsdr" path="res://script/state/InteractState.gd" id="8_wyros"]
[ext_resource type="Script" uid="uid://xerbnbwebg7h" path="res://script/state/UseState.gd" id="9_exdkq"]
[ext_resource type="Script" uid="uid://dlwylnp3l1144" path="res://script/state/DropState.gd" id="10_7uqe1"]
[ext_resource type="Script" uid="uid://cfgsbje7vi3tp" path="res://script/component/MovementComponent.gd" id="11_2ycxl"]
[ext_resource type="Script" uid="uid://djdu4ngv8cr8e" path="res://script/state/DeadState.gd" id="11_b05ef"]
[ext_resource type="Script" uid="uid://dkqq41o5lv5pl" path="res://script/brain/RecordedBrain.gd" id="12_ce7el"]
[ext_resource type="PackedScene" uid="uid://bdsdvn2l2ejwd" path="res://scene/interacter_component.tscn" id="13_xcl4y"]
[ext_resource type="PackedScene" uid="uid://cqttkqoc4j0fr" path="res://scene/speech_text.tscn" id="14_tt30e"]
[ext_resource type="Script" uid="uid://dlihm53dfpyd5" path="res://script/component/RotationTrackerComponent.gd" id="15_pq381"]
[ext_resource type="PackedScene" uid="uid://dh4w6wbocgxad" path="res://scene/pickup_item_component.tscn" id="16_xc1lj"]
[ext_resource type="Script" uid="uid://dcdbliakm3u3e" path="res://script/component/StatDataComponent.gd" id="17_ce7el"]
[ext_resource type="PackedScene" uid="uid://bypnx10jtyfcw" path="res://scene/hurtbox_component.tscn" id="19_p4hug"]
[ext_resource type="Script" uid="uid://0nqej4vc3au4" path="res://script/component/StepRecorderComponent.gd" id="20_cercp"]
[ext_resource type="Script" uid="uid://r6v4breyygeo" path="res://script/component/AnimationController.gd" id="21_6hp1k"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_onrkg"]

[sub_resource type="CircleShape2D" id="CircleShape2D_34jf3"]
radius = 45.0444

[sub_resource type="RectangleShape2D" id="RectangleShape2D_p4hug"]
size = Vector2(22, 29)

[node name="recorded_player" type="CharacterBody2D"]
collision_layer = 2
script = ExtResource("1_vx2og")

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(7.15256e-07, 0.999998)
scale = Vector2(0.15625, 0.203125)
texture = ExtResource("2_b05ef")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_onrkg")

[node name="state_machine" parent="." node_paths=PackedStringArray("initial_state") instance=ExtResource("3_p4hug")]
unique_name_in_owner = true
initial_state = NodePath("idle_state")

[node name="idle_state" type="Node" parent="state_machine" node_paths=PackedStringArray("move_state", "attack_state", "interact_state", "use_state", "drop_state", "dead_state")]
script = ExtResource("4_cercp")
move_state = NodePath("../move_state")
attack_state = NodePath("../atttack_state")
interact_state = NodePath("../interact_state")
use_state = NodePath("../use_state")
drop_state = NodePath("../drop_state")
dead_state = NodePath("../dead_state")

[node name="move_state" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "attack_state", "sprint_state", "interact_state", "use_state", "drop_state", "dead_state")]
script = ExtResource("5_6hp1k")
idle_state = NodePath("../idle_state")
attack_state = NodePath("../atttack_state")
sprint_state = NodePath("../sprint_state")
interact_state = NodePath("../interact_state")
use_state = NodePath("../use_state")
drop_state = NodePath("../drop_state")
dead_state = NodePath("../dead_state")

[node name="sprint_state" type="Node" parent="state_machine" node_paths=PackedStringArray("move_state", "idle_state", "attack_state", "interact_state", "use_state", "drop_state", "dead_state")]
script = ExtResource("6_isn2n")
move_state = NodePath("../move_state")
idle_state = NodePath("../idle_state")
attack_state = NodePath("../atttack_state")
interact_state = NodePath("../interact_state")
use_state = NodePath("../use_state")
drop_state = NodePath("../drop_state")
dead_state = NodePath("../dead_state")

[node name="atttack_state" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "move_state", "dead_state")]
script = ExtResource("7_llrc2")
idle_state = NodePath("../idle_state")
move_state = NodePath("../move_state")
dead_state = NodePath("../dead_state")

[node name="interact_state" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "move_state")]
script = ExtResource("8_wyros")
idle_state = NodePath("../idle_state")
move_state = NodePath("../move_state")

[node name="use_state" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "move_state")]
script = ExtResource("9_exdkq")
idle_state = NodePath("../idle_state")
move_state = NodePath("../move_state")

[node name="drop_state" type="Node" parent="state_machine" node_paths=PackedStringArray("idle_state", "move_state")]
script = ExtResource("10_7uqe1")
idle_state = NodePath("../idle_state")
move_state = NodePath("../move_state")

[node name="dead_state" type="Node" parent="state_machine"]
script = ExtResource("11_b05ef")

[node name="movement_component" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("11_2ycxl")
speed = 5.0
sprint_multiplier = 2.0
metadata/_custom_type_script = "uid://cfgsbje7vi3tp"

[node name="recorded_brain" type="Node" parent="." node_paths=PackedStringArray("pickup_item_component")]
unique_name_in_owner = true
script = ExtResource("12_ce7el")
pickup_item_component = NodePath("../pickup_item_component")

[node name="interacter_component" parent="." instance=ExtResource("13_xcl4y")]
unique_name_in_owner = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="interacter_component"]
shape = SubResource("CircleShape2D_34jf3")

[node name="speech_text" parent="." instance=ExtResource("14_tt30e")]
unique_name_in_owner = true
offset_left = -40.0
offset_top = -39.0
offset_right = -40.0
offset_bottom = -39.0

[node name="rotation_tracker_component" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("15_pq381")

[node name="pickup_item_component" parent="." instance=ExtResource("16_xc1lj")]
unique_name_in_owner = true

[node name="stat_data_component" type="Node" parent="." node_paths=PackedStringArray("hunger_degeneration_timer")]
unique_name_in_owner = true
script = ExtResource("17_ce7el")
hunger_degeneration_timer = NodePath("hunger_degen_timer")
metadata/_custom_type_script = "uid://dcdbliakm3u3e"

[node name="hunger_degen_timer" type="Timer" parent="stat_data_component"]
wait_time = 2.0
autostart = true

[node name="hurtbox_component" parent="." instance=ExtResource("19_p4hug")]
unique_name_in_owner = true
collision_layer = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="hurtbox_component"]
position = Vector2(0, 1.5)
shape = SubResource("RectangleShape2D_p4hug")

[node name="step_recorder_component" type="Node" parent="." node_paths=PackedStringArray("target_brain", "target_pickup_item_component")]
unique_name_in_owner = true
script = ExtResource("20_cercp")
target_brain = NodePath("../recorded_brain")
target_pickup_item_component = NodePath("../pickup_item_component")
metadata/_custom_type_script = "uid://0nqej4vc3au4"

[node name="animation_controller" type="Node" parent="." node_paths=PackedStringArray("movement_component", "pickup_item_component", "stat_data_component")]
script = ExtResource("21_6hp1k")
movement_component = NodePath("../movement_component")
pickup_item_component = NodePath("../pickup_item_component")
stat_data_component = NodePath("../stat_data_component")
metadata/_custom_type_script = "uid://r6v4breyygeo"
