[gd_scene load_steps=25 format=3 uid="uid://c8kgiptw27hnk"]

[ext_resource type="PackedScene" uid="uid://cdmckyq563mja" path="res://scene/player.tscn" id="1_5kiuu"]
[ext_resource type="Script" uid="uid://bs2oplm10hnhp" path="res://script/manager/StaircaseLevelManager.gd" id="1_p1ry8"]
[ext_resource type="PackedScene" uid="uid://uw4m24pq2ena" path="res://scene/cake.tscn" id="3_33cqm"]
[ext_resource type="Script" uid="uid://dnbkjrpno7u1e" path="res://script/class/LevelData.gd" id="3_qpk70"]
[ext_resource type="Texture2D" uid="uid://578crqnkf465" path="res://sprite/board.png" id="5_5g16k"]
[ext_resource type="Script" uid="uid://dpsdxig7vq6hu" path="res://script/class/PickupableItemData.gd" id="6_81276"]
[ext_resource type="PackedScene" uid="uid://3hmeuxy5sim4" path="res://scene/board_pile.tscn" id="6_xlg7c"]
[ext_resource type="PackedScene" uid="uid://o40os8tevy7i" path="res://scene/fireplace.tscn" id="7_qpk70"]
[ext_resource type="Texture2D" uid="uid://bjr0vl3awhamp" path="res://sprite/room.png" id="8_17rxn"]
[ext_resource type="Script" uid="uid://c7vkkmg5qpumj" path="res://script/Level.gd" id="8_ll5lq"]
[ext_resource type="Texture2D" uid="uid://14tbo3pkjvqu" path="res://sprite/cake_piece.png" id="8_ve786"]
[ext_resource type="Texture2D" uid="uid://bwiif3lm1mh17" path="res://sprite/spiral_staircase.png" id="8_yq8tf"]
[ext_resource type="Texture2D" uid="uid://cfrlwfaum460c" path="res://sprite/center_column.png" id="9_yq8tf"]
[ext_resource type="PackedScene" uid="uid://d0o7x3il6yic5" path="res://scene/HUD/hunger_hud.tscn" id="14_ve786"]
[ext_resource type="PackedScene" uid="uid://dyu1r4m2jya2a" path="res://scene/HUD/desperation_hud.tscn" id="15_0lu6w"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ve786"]
vertices = PackedVector2Array(50.8828, -8, 55, -15.4063, 55, -1, -90.6328, -40.8203, -69, -46.8281, -69, -43.0703, -81.7031, -38.5938, -95.1406, -23.8125, -118, -21.3984, -100.211, -2.28906, -129.594, 4.24219, -124.742, 30.1172, -96.2969, 19.8438, -102.391, 52.4609, -74.4766, 41.6563, -73.3438, 63.8984, -44.6875, 44.1406, -35.9766, 62.0781, -13.8672, 54.1172, -22.9063, 36.4531, 10.1406, 35.4375, -5.17969, 13.6563, 20.7109, 15.2734, 98, -1, 115, 1, 115, 22.8516, 60.6328, 22.1016, 55.9609, 5.28125, 98, -18, 116, -18, 116, 1, 33.2578, 1.15625, 26.5625, -8, -3.82813, -12.0469, 3.04688, -44.3203, -21.8672, -36.5469, -23.4375, -58, -39.7734, -42.2422, -39.2891, -58)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5, 6), PackedInt32Array(3, 6, 7, 8), PackedInt32Array(8, 7, 9, 10), PackedInt32Array(11, 10, 9, 12, 13), PackedInt32Array(13, 12, 14, 15), PackedInt32Array(15, 14, 16, 17), PackedInt32Array(18, 17, 16, 19, 20), PackedInt32Array(20, 19, 21, 22), PackedInt32Array(23, 24, 25, 26, 27, 2), PackedInt32Array(23, 28, 29, 30, 24), PackedInt32Array(0, 2, 27, 31, 32), PackedInt32Array(31, 22, 21, 33, 32), PackedInt32Array(34, 32, 33, 35, 36), PackedInt32Array(36, 35, 37, 38)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-49, -68, -50, -35, -28, -28, -14, -9, -15, 10, -29, 28, -46, 34, -70, 32, -87, 15, -90, -2, -86, -19, -76, -30, -59, -36, -59, -60, -95, -50, -126, -28, -140, 3, -134, 35, -108, 61, -75, 74, -34, 72, -9, 63, 18, 42, 29, 21, 37, 12, 48, 14, 53, 32, 125, 33, 125, 11, 155, 11, 155, -5, 126, -5, 126, -28, 88, -28, 88, -11, 65, -11, 65, -27, 50, -27, 45, -18, 32, -18, 10, -52, -21, -68)])

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_5g16k"]
radius = 33.0
height = 72.0

[sub_resource type="Resource" id="Resource_ll5lq"]
resource_local_to_scene = true
script = ExtResource("3_qpk70")
level_id = 0
metadata/_custom_type_script = "uid://dnbkjrpno7u1e"

[sub_resource type="Resource" id="Resource_5g16k"]
resource_local_to_scene = true
script = ExtResource("6_81276")
name = "Board"
can_use_to_attack = true
hold_sprite = ExtResource("5_5g16k")
world_sprite = ExtResource("5_5g16k")
hold_offset = Vector2(0, -20)
scale = Vector2(1, 1)
metadata/_custom_type_script = "uid://dpsdxig7vq6hu"

[sub_resource type="Resource" id="Resource_81276"]
resource_local_to_scene = true
script = ExtResource("6_81276")
name = "CakePiece"
can_use_to_attack = false
hold_sprite = ExtResource("8_ve786")
world_sprite = ExtResource("8_ve786")
hold_offset = Vector2(-5, -5)
scale = Vector2(1, 1)
metadata/_custom_type_script = "uid://dpsdxig7vq6hu"

[sub_resource type="Resource" id="Resource_ve786"]
resource_local_to_scene = true
script = ExtResource("6_81276")
name = "Board"
can_use_to_attack = true
hold_sprite = ExtResource("5_5g16k")
world_sprite = ExtResource("5_5g16k")
hold_offset = Vector2(0, -20)
scale = Vector2(1, 1)
metadata/_custom_type_script = "uid://dpsdxig7vq6hu"

[sub_resource type="Resource" id="Resource_0lu6w"]
resource_local_to_scene = true
script = ExtResource("6_81276")
name = "CakePiece"
can_use_to_attack = false
hold_sprite = ExtResource("8_ve786")
world_sprite = ExtResource("8_ve786")
hold_offset = Vector2(-5, -5)
scale = Vector2(1, 1)
metadata/_custom_type_script = "uid://dpsdxig7vq6hu"

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ve786"]
polygon = PackedVector2Array(-34, -90, -33, -9, -27, 9, -4, 21, 22, 18, 38, -1, 39, -93)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_0lu6w"]
polygon = PackedVector2Array(-52, -60, -53, -14, -47, -14, -46, -55, 65, -56, 65, 31, -49, 31, -49, 12, -54, 12, -53, 36, 70, 36, 70, -60)

[node name="game" type="Node2D"]

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
color = Color(1, 0.765902, 0.727379, 1)
energy = 0.31
blend_mode = 1

[node name="player" parent="." node_paths=PackedStringArray("origin_node") instance=ExtResource("1_5kiuu")]
z_index = 30
position = Vector2(-53, -60)
origin_node = NodePath("../origin")

[node name="background_collision" type="StaticBody2D" parent="."]
z_index = 100
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="background_collision"]
polygon = PackedVector2Array(-15, -86, -15, -68, 11, -53, 30, -25, 31, -23, 39, -23, 44, -23, 44, -28, 156, -28, 156, 48, 42, 49, 42, 14, 37, 14, 32, 19, 26, 34, 8, 54, -13, 68, -49, 76, -61, 77, -83, 73, -114, 59, -137, 35, -143, -1, -124, -32, -94, -52, -79, -72, -52, -78, -16, -68, -16, -86, -157, -85, -157, 93, 163, 94, 163, -86)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_ve786")

[node name="origin" type="RigidBody2D" parent="."]
z_index = 100
position = Vector2(-52, 0)
gravity_scale = 0.0
lock_rotation = true
freeze = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="origin"]
rotation = 1.5708
shape = SubResource("CapsuleShape2D_5g16k")

[node name="staircase_top_marker" type="Marker2D" parent="."]
position = Vector2(-41, -59)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(3, 4)

[node name="Level0" type="Node2D" parent="." node_paths=PackedStringArray("origin_node", "staircase_top", "board_pile", "cake", "fireplace")]
z_index = 10
script = ExtResource("8_ll5lq")
level_data = SubResource("Resource_ll5lq")
origin_node = NodePath("../origin")
staircase_top = NodePath("../staircase_top_marker")
board_pile = NodePath("board_pile")
cake = NodePath("cake")
fireplace = NodePath("fireplace")
metadata/_edit_lock_ = true

[node name="board_pile" parent="Level0" instance=ExtResource("6_xlg7c")]
position = Vector2(141, 22)
board_pickupable_item = SubResource("Resource_5g16k")

[node name="cake" parent="Level0" instance=ExtResource("3_33cqm")]
position = Vector2(76, -21)
cake_pickupable_item = SubResource("Resource_81276")

[node name="fireplace" parent="Level0" instance=ExtResource("7_qpk70")]
position = Vector2(142, -30)

[node name="Level1" type="Node2D" parent="." node_paths=PackedStringArray("origin_node", "staircase_top", "board_pile", "cake", "fireplace")]
visible = false
z_index = 10
script = ExtResource("8_ll5lq")
level_data = SubResource("Resource_ll5lq")
origin_node = NodePath("../origin")
staircase_top = NodePath("../staircase_top_marker")
board_pile = NodePath("board_pile")
cake = NodePath("cake")
fireplace = NodePath("fireplace")
metadata/_edit_lock_ = true

[node name="board_pile" parent="Level1" instance=ExtResource("6_xlg7c")]
position = Vector2(141, 22)
board_pickupable_item = SubResource("Resource_ve786")

[node name="cake" parent="Level1" instance=ExtResource("3_33cqm")]
position = Vector2(76, -21)
cake_pickupable_item = SubResource("Resource_0lu6w")

[node name="fireplace" parent="Level1" instance=ExtResource("7_qpk70")]
position = Vector2(142, -30)

[node name="staircase_level_manager" type="Node" parent="." node_paths=PackedStringArray("player", "level_list")]
script = ExtResource("1_p1ry8")
player = NodePath("../player")
level_list = [NodePath("../Level0"), NodePath("../Level1")]

[node name="Label" type="Label" parent="staircase_level_manager"]
offset_left = -139.0
offset_top = -77.0
offset_right = -44.0
offset_bottom = -54.0
text = "Sample Text"

[node name="spiral_staircase" type="Sprite2D" parent="."]
position = Vector2(-55, 11)
texture = ExtResource("8_yq8tf")
metadata/_edit_lock_ = true

[node name="centre_column" type="Sprite2D" parent="."]
position = Vector2(-55, 11)
texture = ExtResource("9_yq8tf")
metadata/_edit_lock_ = true

[node name="LightOccluder2D" type="LightOccluder2D" parent="centre_column"]
occluder = SubResource("OccluderPolygon2D_ve786")

[node name="room" type="Sprite2D" parent="."]
position = Vector2(91, 2)
texture = ExtResource("8_17rxn")
metadata/_edit_lock_ = true

[node name="LightOccluder2D" type="LightOccluder2D" parent="room"]
occluder = SubResource("OccluderPolygon2D_0lu6w")

[node name="HungerHUD" parent="." node_paths=PackedStringArray("player") instance=ExtResource("14_ve786")]
offset_left = 87.0
offset_top = 71.0
offset_right = 87.0
offset_bottom = 71.0
player = NodePath("../player")

[node name="DesperationHUD" parent="." node_paths=PackedStringArray("player") instance=ExtResource("15_0lu6w")]
offset_left = -144.0
offset_top = 68.0
offset_right = -144.0
offset_bottom = 68.0
player = NodePath("../player")
